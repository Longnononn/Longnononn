-- Dead Rail Script by Long dzz
-- Includes: Speed, Noclip, AutoPickup, AutoAim, ESP Zombie

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "DeadRailUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Credit Label
local creditLabel = Instance.new("TextLabel")
creditLabel.Size = UDim2.new(0, 160, 0, 25)
creditLabel.Position = UDim2.new(0, 10, 0, 10)
creditLabel.BackgroundTransparency = 1
creditLabel.Text = "script by Long dzz"
creditLabel.TextColor3 = Color3.new(1, 1, 1)
creditLabel.Font = Enum.Font.Gotham
creditLabel.TextScaled = true
creditLabel.Parent = screenGui

-- Toggle GUI
local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.new(0, 40, 0, 40)
toggleBtn.Position = UDim2.new(0, 10, 0, 45)
toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
toggleBtn.Text = "+"
toggleBtn.TextScaled = true
toggleBtn.TextColor3 = Color3.new(1, 1, 1)
toggleBtn.Font = Enum.Font.GothamBlack
toggleBtn.Parent = screenGui
Instance.new("UICorner", toggleBtn)

-- Main panel
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 160, 0, 90)
mainFrame.Position = UDim2.new(0, 60, 0, 45)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.Visible = false
mainFrame.Parent = screenGui
Instance.new("UICorner", mainFrame)

-- Speed button
local speedBtn = Instance.new("TextButton")
speedBtn.Size = UDim2.new(1, -20, 0, 30)
speedBtn.Position = UDim2.new(0, 10, 0, 10)
speedBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 0)
speedBtn.Text = "Speed: OFF"
speedBtn.TextScaled = true
speedBtn.Font = Enum.Font.GothamBold
speedBtn.TextColor3 = Color3.new(1, 1, 1)
speedBtn.Parent = mainFrame
Instance.new("UICorner", speedBtn)

-- Noclip button
local noclipBtn = Instance.new("TextButton")
noclipBtn.Size = UDim2.new(1, -20, 0, 30)
noclipBtn.Position = UDim2.new(0, 10, 0, 50)
noclipBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 255)
noclipBtn.Text = "Noclip: OFF"
noclipBtn.TextScaled = true
noclipBtn.Font = Enum.Font.GothamBold
noclipBtn.TextColor3 = Color3.new(1, 1, 1)
noclipBtn.Parent = mainFrame
Instance.new("UICorner", noclipBtn)

-- Toggle visibility
toggleBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = not mainFrame.Visible
end)

-- Feature toggles
local speedEnabled = false
local noclipEnabled = false

speedBtn.MouseButton1Click:Connect(function()
	speedEnabled = not speedEnabled
	humanoid.WalkSpeed = speedEnabled and 30 or 16
	speedBtn.Text = "Speed: " .. (speedEnabled and "ON" or "OFF")
	speedBtn.BackgroundColor3 = speedEnabled and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(255, 150, 0)
end)

noclipBtn.MouseButton1Click:Connect(function()
	noclipEnabled = not noclipEnabled
	noclipBtn.Text = "Noclip: " .. (noclipEnabled and "ON" or "OFF")
	noclipBtn.BackgroundColor3 = noclipEnabled and Color3.fromRGB(0, 200, 255) or Color3.fromRGB(150, 0, 255)
end)

RunService.Stepped:Connect(function()
	if noclipEnabled and character then
		for _, part in ipairs(character:GetDescendants()) do
			if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
				part.CanCollide = false
			end
		end
	end
end)

-- Auto Pickup Items
spawn(function()
	while true do
		for _, item in ipairs(Workspace:GetDescendants()) do
			if item:IsA("BasePart") and item.Name:lower():find("pickup") and (item.Position - hrp.Position).Magnitude < 10 then
				firetouchinterest(hrp, item, 0)
				task.wait()
				firetouchinterest(hrp, item, 1)
			end
		end
		task.wait(0.1)
	end
end)

-- Auto Aim at Zombie
spawn(function()
	while true do
		local closest, dist = nil, 100
		for _, obj in ipairs(Workspace:GetDescendants()) do
			if obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj ~= character then
				local head = obj:FindFirstChild("Head")
				if head and (head.Position - hrp.Position).Magnitude < dist then
					dist = (head.Position - hrp.Position).Magnitude
					closest = head
				end
			end
		end
		if closest then
			hr
p.CFrame = CFrame.new(hrp.Position, Vector3.new(closest.Position.X, hrp.Position.Y, closest.Position.Z))
		end
		task.wait(0.1)
	end
end)

-- ESP for Zombie
local function createESP(part)
	if not part:IsA("BasePart") or part:FindFirstChild("BoxESP") then return end
	local box = Instance.new("BoxHandleAdornment")
	box.Name = "BoxESP"
	box.Adornee = part
	box.AlwaysOnTop = true
	box.ZIndex = 5
	box.Size = part.Size + Vector3.new(0.1, 0.1, 0.1)
	box.Color3 = Color3.fromRGB(255, 0, 0)
	box.Transparency = 0.4
	box.Parent = part
end

for _, obj in ipairs(Workspace:GetDescendants()) do
	if obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj ~= character then
		local head = obj:FindFirstChild("Head") or obj:FindFirstChildWhichIsA("BasePart")
		if head then
			createESP(head)
		end
	end
end

Workspace.DescendantAdded:Connect(function(obj)
	if obj:IsA("Model") and obj:FindFirstChild("Humanoid") and obj ~= character then
		task.wait(0.2)
		local head = obj:FindFirstChild("Head") or obj:FindFirstChildWhichIsA("BasePart")
		if head then
			createESP(head)
		end
	end
end)
