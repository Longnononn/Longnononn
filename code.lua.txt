-- Bắt đầu script toggle menu cho KRNL

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Xóa GUI cũ nếu có
local existingGui = playerGui:FindFirstChild("LongDzzToggleMenu")
if existingGui then
    existingGui:Destroy()
end

-- Tạo ScreenGui mới
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LongDzzToggleMenu"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Tạo Frame chứa menu
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 350, 0, 280)
frame.Position = UDim2.new(0, 20, 0, 20)
frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- Tiêu đề menu
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "Menu Toggle Switch (KRNL)"
title.Font = Enum.Font.FredokaOne
title.TextSize = 22
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Parent = frame

-- Hàm tạo nút toggle switch hình tròn gạt
local function createToggleSwitch(parent, text, position, callback)
    local container = Instance.new("Frame")
    container.Size = UDim2.new(0, 160, 0, 40)
    container.Position = position
    container.BackgroundTransparency = 1
    container.Parent = parent

    local label = Instance.new("TextLabel")
    label.Text = text
    label.Size = UDim2.new(0, 100, 1, 0)
    label.Position = UDim2.new(0, 5, 0, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.new(1,1,1)
    label.Font = Enum.Font.FredokaOne
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = container

    local toggleBackground = Instance.new("Frame")
    toggleBackground.Size = UDim2.new(0, 50, 0, 25)
    toggleBackground.Position = UDim2.new(0, 105, 0, 7)
    toggleBackground.BackgroundColor3 = Color3.fromRGB(140,140,140)
    toggleBackground.BorderSizePixel = 0
    toggleBackground.ClipsDescendants = true
    toggleBackground.Parent = container

    local cornerBG = Instance.new("UICorner")
    cornerBG.CornerRadius = UDim.new(0, 12)
    cornerBG.Parent = toggleBackground

    local toggleCircle = Instance.new("Frame")
    toggleCircle.Size = UDim2.new(0, 23, 0, 23)
    toggleCircle.Position = UDim2.new(0, 1, 0, 1)
    toggleCircle.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
    toggleCircle.BorderSizePixel = 0
    toggleCircle.Name = "ToggleCircle"
    toggleCircle.Parent = toggleBackground

    local cornerCircle = Instance.new("UICorner")
    cornerCircle.CornerRadius = UDim.new(1, 0)
    cornerCircle.Parent = toggleCircle

    local toggled = false

    local function updateToggleVisual()
        if toggled then
            toggleBackground.BackgroundColor3 = Color3.fromRGB(50, 170, 50)
            toggleCircle:TweenPosition(UDim2.new(1, -24, 0, 1), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.2, true)
        else
            toggleBackground.BackgroundColor3 = Color3.fromRGB(140, 140, 140)
            toggleCircle:TweenPosition(UDim2.new(0, 1, 0, 1), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.2, true)
        end
    end

    toggleBackground.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            toggled = not toggled
            updateToggleVisual()
            callback(toggled)
        end
    end)

    updateToggleVisual()

    return {
        container = container,
        set = function(state)
            toggled = state
            updateToggleVisual()
            callback(state)
        end,
        get = function() return toggled end
    }
end

-- Tạo các toggle buttons
local toggles = {}

toggles.fastAttack = createToggleSwitch(frame, "Fast Attack", UDim2.new(0, 10, 0, 50), function(state)
    print("FastAttack toggled:", state)
    -- Thêm code bật tắt tính năng Fast Attack ở đây
end)

toggles.aimNearest = createToggleSwitch(frame, "Aim Nearest", UDim2.new(0, 180, 0, 50), function(state)
    print("AimNearest toggled:", state)
    -- Code bật tắt Aim Nearest
end)

toggles.aoeAttack = createToggleSwitch(frame, "AOE Attack", UDim2.new(0, 10, 0, 100), function(state)
    print("AOEAttack toggled:", state)
end)

toggles.speedBoost = createToggleSwitch(frame, "Speed Boost", UDim2.new(0, 180, 0, 100), function(state)
    print("SpeedBoost toggled:", state)
end)

toggles.flyMode = createToggleSwitch(frame, "Fly Mode", UDim2.new(0, 10, 0, 150), function(state)
    print("FlyMode toggled:", state)
end)

toggles.noClip = createToggleSwitch(frame, "NoClip", UDim2.new(0, 180, 0, 150), function(state)
    print("NoClip toggled:", state)
end)

toggles.esp = createToggleSwitch(frame, "ESP", UDim2.new(0, 10, 0, 200), function(state)
    print("ESP toggled:", state)
end)
